p8105_hw3_smy2122
================
Sarah Younes

First, I will load all the packages I will need for this homework
assignment: tidyverse.

``` r
library(tidyverse)
library(p8105.datasets)
```

# Problem 1

First, I will load the Instacart data set.

``` r
data("instacart")

instacart_df =
  instacart |>
  as_tibble()
```

The Instacart data set contains 15 variables and 1384617 observations.
There are 39123 products found in 131209 orders from 131209 distinct
users.

Furthermore, there are 134 aisles. The aisle most frequently ordered
from is aisle 83, otherwise known as fresh vegetables. According to the
code below, the fresh vegetables and fresh fruits aisles had the most
products.

``` r
instacart_df |>
  count(aisle) |>
  arrange(desc(n))
```

    ## # A tibble: 134 × 2
    ##    aisle                              n
    ##    <chr>                          <int>
    ##  1 fresh vegetables              150609
    ##  2 fresh fruits                  150473
    ##  3 packaged vegetables fruits     78493
    ##  4 yogurt                         55240
    ##  5 packaged cheese                41699
    ##  6 water seltzer sparkling water  36617
    ##  7 milk                           32644
    ##  8 chips pretzels                 31269
    ##  9 soy lactosefree                26240
    ## 10 bread                          23635
    ## # ℹ 124 more rows

Now, I will make a plot that shows the number of items ordered in each
aisle for aisles with more than 10,000 items ordered.

``` r
instacart_df |>
  count(aisle)
```

    ## # A tibble: 134 × 2
    ##    aisle                      n
    ##    <chr>                  <int>
    ##  1 air fresheners candles  1067
    ##  2 asian foods             7007
    ##  3 baby accessories         306
    ##  4 baby bath body care      328
    ##  5 baby food formula      13198
    ##  6 bakery desserts         1501
    ##  7 baking ingredients     13088
    ##  8 baking supplies decor   1094
    ##  9 beauty                   287
    ## 10 beers coolers           1839
    ## # ℹ 124 more rows

Now, I will make a table showing the three most popular items in 3
aisles and the number of times each item was ordered.

``` r
instacart_df |>
  filter(
    aisle == c("baking ingredients", "dog food care", "packaged vegetables fruits")
  ) |>
  select(aisle, product_name, order_id)
```

    ## # A tibble: 31,339 × 3
    ##    aisle                      product_name                      order_id
    ##    <chr>                      <chr>                                <int>
    ##  1 packaged vegetables fruits Super Greens Salad                      36
    ##  2 packaged vegetables fruits Organic Biologique Limes                38
    ##  3 packaged vegetables fruits Organic Raspberries                     96
    ##  4 packaged vegetables fruits Organic Raspberries                     98
    ##  5 baking ingredients         Organic Corn Starch                     98
    ##  6 packaged vegetables fruits Asian Chopped Salad with Dressing      170
    ##  7 packaged vegetables fruits BBQ Ranch Chopped Salad                170
    ##  8 packaged vegetables fruits Baby Spinach                           170
    ##  9 packaged vegetables fruits Organic Blueberries                    226
    ## 10 packaged vegetables fruits Organic Shredded Carrots               844
    ## # ℹ 31,329 more rows

Now, I will make a table showing the mean hour of the day at which two
items were ordered on each day of the week.

# Problem 2

First, I will load the BRFSS dataset.

``` r
library(p8105.datasets)
data("brfss_smart2010")
```

Now, I will create a data frame for the data set and do some data
cleaning: formatting the data to use appropriate variable names,
filtering the data set to focus on the “Overall Health” topic, and
organizing responses as a factor taking levels ordered from “Poor” to
“Excellent.”

``` r
brffs_df =
  p8105.datasets::brfss_smart2010 |>
  janitor::clean_names() |>
  separate(locationdesc, into = c("state", "county"), sep = 5) |>
  select(everything(), -state) |>
  rename(state = locationabbr) |>
  filter(
    topic == "Overall Health",
    response == "Poor" | response == "Fair" | response == "Good" | response == "Very good" | response == "Excellent") |>
  mutate(response = fct_relevel(response, c("Poor", "Fair", "Good", "Very good", "Excellent")))
```

Now, I will identify the states that were observed at 7 or more
locations in 2002 and 2010.

``` r
brffs_df |>
  select(year, state, county) |>
  filter(year == 2002 | year == 2010) |>
  distinct() |>
  group_by(state, year) |>
  summarize(n = n()) |>
  filter(n >= 7) |>
  arrange(year, desc(n)) |>
  knitr::kable()
```

    ## `summarise()` has grouped output by 'state'. You can override using the
    ## `.groups` argument.

| state | year |   n |
|:------|-----:|----:|
| PA    | 2002 |  10 |
| MA    | 2002 |   8 |
| NJ    | 2002 |   8 |
| CT    | 2002 |   7 |
| FL    | 2002 |   7 |
| NC    | 2002 |   7 |
| FL    | 2010 |  41 |
| NJ    | 2010 |  19 |
| TX    | 2010 |  16 |
| CA    | 2010 |  12 |
| MD    | 2010 |  12 |
| NC    | 2010 |  12 |
| NE    | 2010 |  10 |
| WA    | 2010 |  10 |
| MA    | 2010 |   9 |
| NY    | 2010 |   9 |
| OH    | 2010 |   8 |
| CO    | 2010 |   7 |
| PA    | 2010 |   7 |
| SC    | 2010 |   7 |

Now, I will make a spaghetti plot.

``` r
brffs_df |>
  filter(response == "Excellent") |>
  group_by(year, state) |>
  summarize(mean_data_value = mean(data_value)) |>
  ggplot(aes(x = year, y = mean_data_value, group = state, color = state)) +
  geom_line()
```

![](p8105_hw3_smy2122_files/figure-gfm/spaghetti%20plot-1.png)<!-- -->

Now, I will make a two-panel plot.

``` r
brffs_df_2006 =
  brffs_df |>
  filter(year == 2006, state == "NY") |>
  ggplot(aes(x = response, y = data_value)) +
  geom_point()
```

# Problem 3
